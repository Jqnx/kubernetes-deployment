# Playbook File
---
- name: Bootstrap kubernetes nodes
  hosts: master1_dev
  become: true
  gather_facts: true

  tasks:
    - name: Update all systems
      ansible.builtin.apt:
        update_cache: true
        upgrade: true

    # Get docker ready
    - name: Install Docker
      ansible.builtin.include_role:
        name: docker
        tasks_from: main

    # Get containerd ready
    - name: Configure containerd
      ansible.builtin.include_role:
        name: containerd

    # - name: Install docker-cri
    #   ansible.builtin.include_role:
    #     name: cri-dockerd

    # Get kubernetes ready
    - name: Create kubernetes cluster
      ansible.builtin.include_role:
        name: kubernetes
